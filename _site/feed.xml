<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="https://jekyllrb.com/" version="3.6.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml"/><link href="http://localhost:4000/" rel="alternate" type="text/html"/><updated>2017-12-27T21:50:31+08:00</updated><id>http://localhost:4000/</id><title type="html">ZhouYang Luo’s Website</title><subtitle>Welcome to my website. I will share my ideas with you in here.</subtitle><entry><title type="html">使用Docker搭建Tensorflow开发环境</title><link href="http://localhost:4000/2017/12/05/tensorflow_develop_environment_with_docker/" rel="alternate" type="text/html" title="使用Docker搭建Tensorflow开发环境"/><published>2017-12-05T05:15:05+08:00</published><updated>2017-12-05T05:15:05+08:00</updated><id>http://localhost:4000/2017/12/05/tensorflow_develop_environment_with_docker</id><content type="html" xml:base="http://localhost:4000/2017/12/05/tensorflow_develop_environment_with_docker/">&lt;p&gt;本文基于Ubuntu 16.04 LTS使用Docker来搭建Tensorflow的开发环境.&lt;/p&gt; &lt;p&gt;Docker和Tensorflow就不用介绍了,项目均已开源在Github.&lt;/p&gt; &lt;ul&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/tensorflow/tensorflow&quot;&gt;Tensorflow&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;https://github.com/docker/docker-ce&quot;&gt;Docker CE&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;h2 id=&quot;docker的安装&quot;&gt;Docker的安装&lt;/h2&gt; &lt;p&gt;Docker的安装在官方网站有非常详细的文档,请参考:&lt;a href=&quot;https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/&quot;&gt;Docker CE installation on Ubuntu&lt;/a&gt;&lt;br /&gt; 本文只是做一个稍微简单一点的概述.&lt;/p&gt; &lt;h3 id=&quot;step-1-卸载旧版本&quot;&gt;Step 1 卸载旧版本&lt;/h3&gt; &lt;p&gt;使用如下命令:&lt;/p&gt; &lt;blockquote&gt; &lt;blockquote&gt; &lt;p&gt;&lt;strong&gt;sudo apt remove docker docker-engine docker.io&lt;/strong&gt;&lt;/p&gt; &lt;/blockquote&gt; &lt;/blockquote&gt; &lt;h3 id=&quot;step-2-安装docker-ce&quot;&gt;Step 2 安装Docker CE&lt;/h3&gt; &lt;p&gt;依次使用如下命令:&lt;/p&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt install &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt; apt-transport-https &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt; ca-certificates &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt; software-properties-common curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://download.docker.com/linux/ubuntu/gpg | &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-key add - &lt;span class=&quot;c&quot;&gt;# 验证指纹 &lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-key fingerprint 0EBFCD88 &lt;span class=&quot;c&quot;&gt;# X86_64/amd64平台 &lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;add-apt-repository &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;lsb_release &lt;span class=&quot;nt&quot;&gt;-cs&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; stable&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 安装Docker CE &lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt install docker-ce &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;至此,Docker CE已经通过apt源安装在机器上了.&lt;/p&gt; &lt;h2 id=&quot;tensorflow的安装&quot;&gt;Tensorflow的安装&lt;/h2&gt; &lt;p&gt;接下来可以安装Tensorflow了.&lt;/p&gt; &lt;p&gt;本教程使用的是Tensorflow GPU版本,因此需要在Docker Hub拉取Tensorflow-gpu的镜像即可.&lt;br /&gt; 如果安装CPU版本的Tensorflow,会更简单.&lt;/p&gt; &lt;h3 id=&quot;安装nvidia显卡驱动和cuda-toolkit&quot;&gt;安装NVIDIA显卡驱动和CUDA toolkit&lt;/h3&gt; &lt;p&gt;目前Tensorflow GPU版本支持需要CUDA 8.0和cuDNN 6.0, 直接从官网下载安装好即可.&lt;br /&gt; 驱动直接安装最新的即可.&lt;br /&gt; CUDA 8.0的下载入口不明显,在NVIDIA下载页面的底部,有一个 &lt;strong&gt;Legacy Releases&lt;/strong&gt; 链接,点进去既可看到各种历史版本的CUDA.&lt;br /&gt; cuDNN安装6.0版本即可.&lt;br /&gt; 安装好之后要配置环境变量.&lt;/p&gt; &lt;h3 id=&quot;安装nvidia-docker&quot;&gt;安装NVIDIA-Docker&lt;/h3&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker volume &lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;driver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;nvidia-docker | xargs &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n1&lt;/span&gt; docker ps &lt;span class=&quot;nt&quot;&gt;-q&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;volume&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={}&lt;/span&gt; | xargs &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; docker rm &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get purge nvidia-docker &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install nvidia-docker2 &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;pkill &lt;span class=&quot;nt&quot;&gt;-SIGHUP&lt;/span&gt; dockerd &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;h3 id=&quot;拉取并运行tensorflow-gpu镜像&quot;&gt;拉取并运行Tensorflow-GPU镜像&lt;/h3&gt; &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nvidia-docker run &lt;span class=&quot;nt&quot;&gt;-it&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 8888:8888 tensorflow/tensorflow:latest-gpu &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt; &lt;p&gt;本地没有 tensorflow/tensorflow:latest-gpu镜像,Docker会自动从Docker Hub拉取.&lt;br /&gt; 等它结束之后,本地已经有了最新版本的GPU版的Tensorflow.&lt;br /&gt; 上述命令会进入一个新的容器,里面装好了tensorflow-gpu版本,可以直接使用了.&lt;/p&gt;</content><author><name></name></author><summary type="html">本文基于Ubuntu 16.04 LTS使用Docker来搭建Tensorflow的开发环境.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/images/startup.jpg"/></entry></feed>